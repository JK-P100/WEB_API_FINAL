{% extends "base.html" %}

{% block body_class %}admin-no-scroll{% endblock %}
{% load static %}
{% block title %}Room Management{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/admin.css' %}">
<div class="admin-wrapper">
  <div class="admin-sidebar">
    <div class="sidebar-header">Admin</div>
    <nav class="sidebar-nav">
      <a href="{% url 'admin_dashboard' %}" class="nav-item"><span class="nav-icon">📊</span><span>Dashboard</span></a>
      <a href="{% url 'admin_rooms' %}" class="nav-item active"><span class="nav-icon">🛏️</span><span>Rooms</span></a>
      <a href="{% url 'admin_bookings' %}" class="nav-item"><span class="nav-icon">📅</span><span>Bookings</span></a>
      <a href="#" class="nav-item"><span class="nav-icon">👥</span><span>Users</span></a>
      <a href="#" class="nav-item"><span class="nav-icon">📈</span><span>Analytics</span></a>
      <a href="#" class="nav-item"><span class="nav-icon">⚙️</span><span>Settings</span></a>
    </nav>
  </div>
  <div class="admin-main">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
      <h1 style="margin: 0; font-size: 24px; font-weight: 700; color: #1a2332;">Room Management</h1>
      <button class="btn-primary" onclick="openAddRoomModal()">+ Add New Room</button>
    </div>
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-icon" style="background: #e8f3ff; color: #2563eb;">🛏️</div>
        <div class="stat-info">
          <div class="stat-label">Total Rooms</div>
          <div class="stat-value">{{ total_rooms }}</div>
          <div class="stat-change">All properties</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: #f0fdf4; color: #16a34a;">✓</div>
        <div class="stat-info">
          <div class="stat-label">Available</div>
          <div class="stat-value">{{ available_rooms }}</div>
          <div class="stat-change">Ready to book</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon" style="background: #fef3c7; color: #f59e0b;">📌</div>
        <div class="stat-info">
          <div class="stat-label">Occupied</div>
          <div class="stat-value">{{ occupied_rooms }}</div>
          <div class="stat-change">Currently booked</div>
        </div>
      </div>
    </div>
    <div class="table-card">
      <div class="table-header"><h4>All Rooms</h4></div>
      <div class="table-scroll">
        <table class="bookings-table">
          <thead>
            <tr>
              <th>Room ID</th>
              <th>Room Name</th>
              <th>Type</th>
              <th>Price/Night</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for room in rooms %}
            <tr>
              <td>#{{ room.id }}01</td>
              <td>{{ room.title }}</td>
              <td>{{ room.type }}</td>
              <td>${{ room.price }}</td>
              <td>{% if room.status == "Available" %}<span class="status-badge available">Available</span>{% else %}<span class="status-badge occupied">Occupied</span>{% endif %}</td>
              <td><button class="btn-sm edit">Edit</button><button class="btn-sm delete">Delete</button></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div id="addRoomModal" class="modal">
  <div class="modal-content">
    <div class="modal-header"><h2>Add New Room</h2><button class="modal-close" onclick="closeAddRoomModal()">&times;</button></div>
    <form class="modal-form" onsubmit="submitRoom(event)">
      <div class="form-row">
        <div class="form-group"><label>Room Name</label><input type="text" name="title" placeholder="e.g., Deluxe Ocean Suite" required></div>
        <div class="form-group"><label>Room Type</label><select name="type" required><option value="">Select Type</option><option>Standard</option><option>Suite</option><option>Family</option></select></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Price per Night</label><input type="number" name="price" placeholder="e.g., 150" required></div>
        <div class="form-group"><label>Capacity (Guests)</label><input type="number" name="capacity" placeholder="e.g., 2" required></div>
      </div>
      <div class="form-row">
        <div class="form-group"><label>Status</label><select name="status" required><option>Available</option><option>Occupied</option></select></div>
        <div class="form-group"><label>Image URL</label><input type="text" name="image_url" placeholder="https://..."></div>
      </div>
      <div class="form-group"><label>Description</label><textarea name="description" rows="4" placeholder="Room description and amenities"></textarea></div>
      <div class="form-actions">
        <button type="button" class="btn-secondary" onclick="closeAddRoomModal()">Cancel</button>
        <button type="submit" class="btn-primary">Add Room</button>
      </div>
    </form>
  </div>
</div>
<script>
function openAddRoomModal() { document.getElementById('addRoomModal').style.display = 'block'; }
function closeAddRoomModal() { document.getElementById('addRoomModal').style.display = 'none'; }
function submitRoom(e) { e.preventDefault(); alert('Room added!'); closeAddRoomModal(); }
window.onclick = function(e) { const modal = document.getElementById('addRoomModal'); if(e.target === modal) modal.style.display = 'none'; }
</script>
{% endblock %}

